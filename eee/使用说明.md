# TXT转MP3工具使用说明

这是一个将文本文件转换为MP3音频文件的Python工具集，支持中文和英文文本转语音。

## 🎯 功能特点

- ✅ 支持中文和英文文本转语音
- ✅ 支持大文件处理（自动分块）
- ✅ 可调节语音速度和音量
- ✅ 支持批量转换
- ✅ 支持WAV和MP3格式输出
- ✅ 智能文本分割，保持语句完整性

## 📁 文件说明

1. **`install_requirements.py`** - 依赖安装脚本
2. **`txt_to_mp3.py`** - 基础版本，适合小到中等大小的文件
3. **`txt_to_mp3_advanced.py`** - 高级版本，专门处理大文件

## 🚀 快速开始

### 第一步：安装依赖

运行安装脚本：
```bash
python install_requirements.py
```

### 第二步：开始转换

**处理普通文件：**
```bash
python txt_to_mp3.py
```

**处理大文件：**
```bash
python txt_to_mp3_advanced.py
```

## 📋 详细安装步骤

### 安装Python依赖

**自动安装（推荐）：**
```bash
python install_requirements.py
```

**手动安装：**
```bash
pip install pyttsx3 pydub
```

### 安装FFmpeg（可选，用于MP3格式）

**Windows用户：**
1. 访问 https://ffmpeg.org/download.html
2. 下载Windows版本
3. 解压到某个文件夹（如 `C:\ffmpeg`）
4. 将 `C:\ffmpeg\bin` 添加到系统PATH环境变量

**如果不安装FFmpeg：**
- 程序会生成WAV格式的音频文件
- 你可以使用在线工具将WAV转换为MP3

## 🎮 使用方法

### 方法一：基础版本（推荐用于小文件）

```bash
python txt_to_mp3.py
```

**功能：**
- 单个文件转换
- 批量转换文件夹中的所有txt文件
- 可设置语音速度和音量

**操作步骤：**
1. 选择转换模式（单个文件/批量转换）
2. 输入文件路径
3. 设置语音参数
4. 等待转换完成

### 方法二：高级版本（推荐用于大文件）

```bash
python txt_to_mp3_advanced.py
```

**功能：**
- 自动检测当前目录的txt文件
- 智能分块处理大文件
- 显示文件预览
- 进度显示
- 自动合并音频块

**操作步骤：**
1. 程序自动扫描txt文件
2. 选择要转换的文件
3. 预览文件内容
4. 设置转换参数
5. 等待分块转换和合并

## ⚙️ 参数说明

| 参数 | 范围 | 推荐值 | 说明 |
|------|------|--------|------|
| 语音速度 | 50-300 | 180-200 | 数值越大语速越快 |
| 音量 | 0.0-1.0 | 0.9 | 1.0为最大音量 |
| 分块大小 | 500-2000字符 | 800 | 仅高级版本，影响处理速度 |

## 💡 使用示例

### 示例1：转换单个文件
```python
# 运行基础版本
python txt_to_mp3.py

# 选择：1（单个文件转换）
# 输入文件路径：我的小说.txt
# 输出路径：（回车使用默认）
# 语音速度：180
# 音量：0.9
```

### 示例2：批量转换
```python
# 运行基础版本
python txt_to_mp3.py

# 选择：2（批量转换）
# 输入文件夹路径：./小说文件夹
# 输出文件夹：（回车使用默认）
```

### 示例3：处理大文件
```python
# 运行高级版本
python txt_to_mp3_advanced.py

# 程序会自动显示可用的txt文件
# 选择文件编号：1
# 查看文件预览
# 设置参数并开始转换
```

## ❓ 常见问题

### Q1: 转换速度很慢怎么办？
**A:** 
- 使用高级版本处理大文件
- 调整分块大小（减小分块可能更快）
- 确保电脑有足够的内存
- 关闭其他占用CPU的程序

### Q2: 生成的是WAV文件而不是MP3？
**A:** 
- 需要安装FFmpeg才能生成MP3
- 或者使用在线工具转换WAV到MP3
- 推荐网站：https://convertio.co/zh/wav-mp3/

### Q3: 中文发音不准确？
**A:** 
- Windows系统可能需要安装中文语音包
- 在"设置 > 时间和语言 > 语音"中添加中文语音
- 或者使用在线TTS服务

### Q4: 程序运行出错？
**A:** 
- 确保已安装所有依赖：`python install_requirements.py`
- 检查txt文件编码是否为UTF-8
- 确保文件路径中没有特殊字符

### Q5: 音频文件太大？
**A:** 
- 调整语音速度（提高速度可减小文件）
- 使用MP3格式而不是WAV
- 考虑分章节转换

## 🔧 高级用法

### 在代码中直接调用

```python
from txt_to_mp3 import txt_to_mp3

# 基础转换
success = txt_to_mp3(
    txt_file_path="我的文档.txt",
    output_mp3_path="我的音频.mp3",
    voice_rate=180,
    voice_volume=0.9
)

if success:
    print("转换成功！")
```

```python
from txt_to_mp3_advanced import txt_to_mp3_large_file

# 大文件转换
success = txt_to_mp3_large_file(
    txt_file_path="大文件.txt",
    output_mp3_path="大文件音频.wav",
    voice_rate=180,
    voice_volume=0.9,
    chunk_size=800
)
```

### 批量处理脚本

```python
from txt_to_mp3 import batch_convert

# 批量转换文件夹中的所有txt文件
batch_convert(
    folder_path="./小说文件夹",
    output_folder="./音频输出"
)
```

## 📝 注意事项

1. **文件编码**：确保txt文件使用UTF-8编码
2. **文件大小**：超过10MB的文件建议使用高级版本
3. **系统资源**：转换过程会占用较多CPU和内存
4. **音频质量**：WAV格式音质更好但文件更大
5. **版权问题**：请确保你有权转换相关文本内容

## 🆘 技术支持

如果遇到问题，请检查：
1. Python版本（建议3.7+）
2. 依赖包是否正确安装
3. 文件路径和权限
4. 系统语音设置

## 📄 许可证

本工具仅供学习和个人使用，请遵守相关法律法规。